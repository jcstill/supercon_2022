
; macro output:          #FEDC   Flags    Add_   Carry 
; first word (Cin=0):     0000    0VZC    X+Y_    CY0_ 
; second word (Cin=1):    0000    0VZC    X+Y+1   CY1_ 

.macro	adder	opx,opy,cy0,cy1,fl0,fl1
	.word	(\fl0<<8)|(((\opx+\opy)&15)<<4)|\cy0
	.word	(\fl1<<8)|(((\opx+\opy+1)&15)<<4)|\cy1
.endm

; Opx = operand X
; Opy = operand Y
; Cy0 = Carry word if Cin=0
; Cy1 = Carry word if Cin=1
; FL0 = Flags V, Z, C if Cin=0 (bit 3 unused)
; FL1 = Flags V, Z, C if Cin=1 (bit 3 unused)

table_adder:

;		OpX OpY Cy0 Cy1 FL0 FL1
	adder	0x0,0x0,0x0,0x0,0x2,0x0
	adder	0x0,0x1,0x0,0x1,0x0,0x0
	adder	0x0,0x2,0x0,0x0,0x0,0x0
	adder	0x0,0x3,0x0,0x3,0x0,0x0
	adder	0x0,0x4,0x0,0x0,0x0,0x0
	adder	0x0,0x5,0x0,0x1,0x0,0x0
	adder	0x0,0x6,0x0,0x0,0x0,0x0
	adder	0x0,0x7,0x0,0x7,0x0,0x4
	adder	0x0,0x8,0x0,0x0,0x0,0x0
	adder	0x0,0x9,0x0,0x1,0x0,0x0
	adder	0x0,0xA,0x0,0x0,0x0,0x0
	adder	0x0,0xB,0x0,0x3,0x0,0x0
	adder	0x0,0xC,0x0,0x0,0x0,0x0
	adder	0x0,0xD,0x0,0x1,0x0,0x0
	adder	0x0,0xE,0x0,0x0,0x0,0x0
	adder	0x0,0xF,0x0,0xF,0x0,0x3
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x1,0x0,0x0,0x1,0x0,0x0
	adder	0x1,0x1,0x1,0x1,0x0,0x0
	adder	0x1,0x2,0x0,0x3,0x0,0x0
	adder	0x1,0x3,0x3,0x3,0x0,0x0
	adder	0x1,0x4,0x0,0x1,0x0,0x0
	adder	0x1,0x5,0x1,0x1,0x0,0x0
	adder	0x1,0x6,0x0,0x7,0x0,0x4
	adder	0x1,0x7,0x7,0x7,0x4,0x4
	adder	0x1,0x8,0x0,0x1,0x0,0x0
	adder	0x1,0x9,0x1,0x1,0x0,0x0
	adder	0x1,0xA,0x0,0x3,0x0,0x0
	adder	0x1,0xB,0x3,0x3,0x0,0x0
	adder	0x1,0xC,0x0,0x1,0x0,0x0
	adder	0x1,0xD,0x1,0x1,0x0,0x0
	adder	0x1,0xE,0x0,0xF,0x0,0x3
	adder	0x1,0xF,0xF,0xF,0x3,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x2,0x0,0x0,0x0,0x0,0x0
	adder	0x2,0x1,0x0,0x3,0x0,0x0
	adder	0x2,0x2,0x2,0x2,0x0,0x0
	adder	0x2,0x3,0x2,0x3,0x0,0x0
	adder	0x2,0x4,0x0,0x0,0x0,0x0
	adder	0x2,0x5,0x0,0x7,0x0,0x4
	adder	0x2,0x6,0x6,0x6,0x4,0x4
	adder	0x2,0x7,0x6,0x7,0x4,0x4
	adder	0x2,0x8,0x0,0x0,0x0,0x0
	adder	0x2,0x9,0x0,0x3,0x0,0x0
	adder	0x2,0xA,0x2,0x2,0x0,0x0
	adder	0x2,0xB,0x2,0x3,0x0,0x0
	adder	0x2,0xC,0x0,0x0,0x0,0x0
	adder	0x2,0xD,0x0,0xF,0x0,0x3
	adder	0x2,0xE,0xE,0xE,0x3,0x1
	adder	0x2,0xF,0xE,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x3,0x0,0x0,0x3,0x0,0x0
	adder	0x3,0x1,0x3,0x3,0x0,0x0
	adder	0x3,0x2,0x2,0x3,0x0,0x0
	adder	0x3,0x3,0x3,0x3,0x0,0x0
	adder	0x3,0x4,0x0,0x7,0x0,0x4
	adder	0x3,0x5,0x7,0x7,0x4,0x4
	adder	0x3,0x6,0x6,0x7,0x4,0x4
	adder	0x3,0x7,0x7,0x7,0x4,0x4
	adder	0x3,0x8,0x0,0x3,0x0,0x0
	adder	0x3,0x9,0x3,0x3,0x0,0x0
	adder	0x3,0xA,0x2,0x3,0x0,0x0
	adder	0x3,0xB,0x3,0x3,0x0,0x0
	adder	0x3,0xC,0x0,0xF,0x0,0x3
	adder	0x3,0xD,0xF,0xF,0x3,0x1
	adder	0x3,0xE,0xE,0xF,0x1,0x1
	adder	0x3,0xF,0xF,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x4,0x0,0x0,0x0,0x0,0x0
	adder	0x4,0x1,0x0,0x1,0x0,0x0
	adder	0x4,0x2,0x0,0x0,0x0,0x0
	adder	0x4,0x3,0x0,0x7,0x0,0x4
	adder	0x4,0x4,0x4,0x4,0x4,0x4
	adder	0x4,0x5,0x4,0x5,0x4,0x4
	adder	0x4,0x6,0x4,0x4,0x4,0x4
	adder	0x4,0x7,0x4,0x7,0x4,0x4
	adder	0x4,0x8,0x0,0x0,0x0,0x0
	adder	0x4,0x9,0x0,0x1,0x0,0x0
	adder	0x4,0xA,0x0,0x0,0x0,0x0
	adder	0x4,0xB,0x0,0xF,0x0,0x3
	adder	0x4,0xC,0xC,0xC,0x3,0x1
	adder	0x4,0xD,0xC,0xD,0x1,0x1
	adder	0x4,0xE,0xC,0xC,0x1,0x1
	adder	0x4,0xF,0xC,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x5,0x0,0x0,0x1,0x0,0x0
	adder	0x5,0x1,0x1,0x1,0x0,0x0
	adder	0x5,0x2,0x0,0x7,0x0,0x4
	adder	0x5,0x3,0x7,0x7,0x4,0x4
	adder	0x5,0x4,0x4,0x5,0x4,0x4
	adder	0x5,0x5,0x5,0x5,0x4,0x4
	adder	0x5,0x6,0x4,0x7,0x4,0x4
	adder	0x5,0x7,0x7,0x7,0x4,0x4
	adder	0x5,0x8,0x0,0x1,0x0,0x0
	adder	0x5,0x9,0x1,0x1,0x0,0x0
	adder	0x5,0xA,0x0,0xF,0x0,0x3
	adder	0x5,0xB,0xF,0xF,0x3,0x1
	adder	0x5,0xC,0xC,0xD,0x1,0x1
	adder	0x5,0xD,0xD,0xD,0x1,0x1
	adder	0x5,0xE,0xC,0xF,0x1,0x1
	adder	0x5,0xF,0xF,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x6,0x0,0x0,0x0,0x0,0x0
	adder	0x6,0x1,0x0,0x7,0x0,0x4
	adder	0x6,0x2,0x6,0x6,0x4,0x4
	adder	0x6,0x3,0x6,0x7,0x4,0x4
	adder	0x6,0x4,0x4,0x4,0x4,0x4
	adder	0x6,0x5,0x4,0x7,0x4,0x4
	adder	0x6,0x6,0x6,0x6,0x4,0x4
	adder	0x6,0x7,0x6,0x7,0x4,0x4
	adder	0x6,0x8,0x0,0x0,0x0,0x0
	adder	0x6,0x9,0x0,0xF,0x0,0x3
	adder	0x6,0xA,0xE,0xE,0x3,0x1
	adder	0x6,0xB,0xE,0xF,0x1,0x1
	adder	0x6,0xC,0xC,0xC,0x1,0x1
	adder	0x6,0xD,0xC,0xF,0x1,0x1
	adder	0x6,0xE,0xE,0xE,0x1,0x1
	adder	0x6,0xF,0xE,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x7,0x0,0x0,0x7,0x0,0x4
	adder	0x7,0x1,0x7,0x7,0x4,0x4
	adder	0x7,0x2,0x6,0x7,0x4,0x4
	adder	0x7,0x3,0x7,0x7,0x4,0x4
	adder	0x7,0x4,0x4,0x7,0x4,0x4
	adder	0x7,0x5,0x7,0x7,0x4,0x4
	adder	0x7,0x6,0x6,0x7,0x4,0x4
	adder	0x7,0x7,0x7,0x7,0x4,0x4
	adder	0x7,0x8,0x0,0xF,0x0,0x3
	adder	0x7,0x9,0xF,0xF,0x3,0x1
	adder	0x7,0xA,0xE,0xF,0x1,0x1
	adder	0x7,0xB,0xF,0xF,0x1,0x1
	adder	0x7,0xC,0xC,0xF,0x1,0x1
	adder	0x7,0xD,0xF,0xF,0x1,0x1
	adder	0x7,0xE,0xE,0xF,0x1,0x1
	adder	0x7,0xF,0xF,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x8,0x0,0x0,0x0,0x0,0x0
	adder	0x8,0x1,0x0,0x1,0x0,0x0
	adder	0x8,0x2,0x0,0x0,0x0,0x0
	adder	0x8,0x3,0x0,0x3,0x0,0x0
	adder	0x8,0x4,0x0,0x0,0x0,0x0
	adder	0x8,0x5,0x0,0x1,0x0,0x0
	adder	0x8,0x6,0x0,0x0,0x0,0x0
	adder	0x8,0x7,0x0,0xF,0x0,0x3
	adder	0x8,0x8,0x8,0x8,0x7,0x5
	adder	0x8,0x9,0x8,0x9,0x5,0x5
	adder	0x8,0xA,0x8,0x8,0x5,0x5
	adder	0x8,0xB,0x8,0xB,0x5,0x5
	adder	0x8,0xC,0x8,0x8,0x5,0x5
	adder	0x8,0xD,0x8,0x9,0x5,0x5
	adder	0x8,0xE,0x8,0x8,0x5,0x5
	adder	0x8,0xF,0x8,0xF,0x5,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0x9,0x0,0x0,0x1,0x0,0x0
	adder	0x9,0x1,0x1,0x1,0x0,0x0
	adder	0x9,0x2,0x0,0x3,0x0,0x0
	adder	0x9,0x3,0x3,0x3,0x0,0x0
	adder	0x9,0x4,0x0,0x1,0x0,0x0
	adder	0x9,0x5,0x1,0x1,0x0,0x0
	adder	0x9,0x6,0x0,0xF,0x0,0x3
	adder	0x9,0x7,0xF,0xF,0x3,0x1
	adder	0x9,0x8,0x8,0x9,0x5,0x5
	adder	0x9,0x9,0x9,0x9,0x5,0x5
	adder	0x9,0xA,0x8,0xB,0x5,0x5
	adder	0x9,0xB,0xB,0xB,0x5,0x5
	adder	0x9,0xC,0x8,0x9,0x5,0x5
	adder	0x9,0xD,0x9,0x9,0x5,0x5
	adder	0x9,0xE,0x8,0xF,0x5,0x1
	adder	0x9,0xF,0xF,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0xA,0x0,0x0,0x0,0x0,0x0
	adder	0xA,0x1,0x0,0x3,0x0,0x0
	adder	0xA,0x2,0x2,0x2,0x0,0x0
	adder	0xA,0x3,0x2,0x3,0x0,0x0
	adder	0xA,0x4,0x0,0x0,0x0,0x0
	adder	0xA,0x5,0x0,0xF,0x0,0x3
	adder	0xA,0x6,0xE,0xE,0x3,0x1
	adder	0xA,0x7,0xE,0xF,0x1,0x1
	adder	0xA,0x8,0x8,0x8,0x5,0x5
	adder	0xA,0x9,0x8,0xB,0x5,0x5
	adder	0xA,0xA,0xA,0xA,0x5,0x5
	adder	0xA,0xB,0xA,0xB,0x5,0x5
	adder	0xA,0xC,0x8,0x8,0x5,0x5
	adder	0xA,0xD,0x8,0xF,0x5,0x1
	adder	0xA,0xE,0xE,0xE,0x1,0x1
	adder	0xA,0xF,0xE,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0xB,0x0,0x0,0x3,0x0,0x0
	adder	0xB,0x1,0x3,0x3,0x0,0x0
	adder	0xB,0x2,0x2,0x3,0x0,0x0
	adder	0xB,0x3,0x3,0x3,0x0,0x0
	adder	0xB,0x4,0x0,0xF,0x0,0x3
	adder	0xB,0x5,0xF,0xF,0x3,0x1
	adder	0xB,0x6,0xE,0xF,0x1,0x1
	adder	0xB,0x7,0xF,0xF,0x1,0x1
	adder	0xB,0x8,0x8,0xB,0x5,0x5
	adder	0xB,0x9,0xB,0xB,0x5,0x5
	adder	0xB,0xA,0xA,0xB,0x5,0x5
	adder	0xB,0xB,0xB,0xB,0x5,0x5
	adder	0xB,0xC,0x8,0xF,0x5,0x1
	adder	0xB,0xD,0xF,0xF,0x1,0x1
	adder	0xB,0xE,0xE,0xF,0x1,0x1
	adder	0xB,0xF,0xF,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0xC,0x0,0x0,0x0,0x0,0x0
	adder	0xC,0x1,0x0,0x1,0x0,0x0
	adder	0xC,0x2,0x0,0x0,0x0,0x0
	adder	0xC,0x3,0x0,0xF,0x0,0x3
	adder	0xC,0x4,0xC,0xC,0x3,0x1
	adder	0xC,0x5,0xC,0xD,0x1,0x1
	adder	0xC,0x6,0xC,0xC,0x1,0x1
	adder	0xC,0x7,0xC,0xF,0x1,0x1
	adder	0xC,0x8,0x8,0x8,0x5,0x5
	adder	0xC,0x9,0x8,0x9,0x5,0x5
	adder	0xC,0xA,0x8,0x8,0x5,0x5
	adder	0xC,0xB,0x8,0xF,0x5,0x1
	adder	0xC,0xC,0xC,0xC,0x1,0x1
	adder	0xC,0xD,0xC,0xD,0x1,0x1
	adder	0xC,0xE,0xC,0xC,0x1,0x1
	adder	0xC,0xF,0xC,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0xD,0x0,0x0,0x1,0x0,0x0
	adder	0xD,0x1,0x1,0x1,0x0,0x0
	adder	0xD,0x2,0x0,0xF,0x0,0x3
	adder	0xD,0x3,0xF,0xF,0x3,0x1
	adder	0xD,0x4,0xC,0xD,0x1,0x1
	adder	0xD,0x5,0xD,0xD,0x1,0x1
	adder	0xD,0x6,0xC,0xF,0x1,0x1
	adder	0xD,0x7,0xF,0xF,0x1,0x1
	adder	0xD,0x8,0x8,0x9,0x5,0x5
	adder	0xD,0x9,0x9,0x9,0x5,0x5
	adder	0xD,0xA,0x8,0xF,0x5,0x1
	adder	0xD,0xB,0xF,0xF,0x1,0x1
	adder	0xD,0xC,0xC,0xD,0x1,0x1
	adder	0xD,0xD,0xD,0xD,0x1,0x1
	adder	0xD,0xE,0xC,0xF,0x1,0x1
	adder	0xD,0xF,0xF,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0xE,0x0,0x0,0x0,0x0,0x0
	adder	0xE,0x1,0x0,0xF,0x0,0x3
	adder	0xE,0x2,0xE,0xE,0x3,0x1
	adder	0xE,0x3,0xE,0xF,0x1,0x1
	adder	0xE,0x4,0xC,0xC,0x1,0x1
	adder	0xE,0x5,0xC,0xF,0x1,0x1
	adder	0xE,0x6,0xE,0xE,0x1,0x1
	adder	0xE,0x7,0xE,0xF,0x1,0x1
	adder	0xE,0x8,0x8,0x8,0x5,0x5
	adder	0xE,0x9,0x8,0xF,0x5,0x1
	adder	0xE,0xA,0xE,0xE,0x1,0x1
	adder	0xE,0xB,0xE,0xF,0x1,0x1
	adder	0xE,0xC,0xC,0xC,0x1,0x1
	adder	0xE,0xD,0xC,0xF,0x1,0x1
	adder	0xE,0xE,0xE,0xE,0x1,0x1
	adder	0xE,0xF,0xE,0xF,0x1,0x1
;		SRC DST Cy0 Cy1 FL0 FL1
	adder	0xF,0x0,0x0,0xF,0x0,0x3
	adder	0xF,0x1,0xF,0xF,0x3,0x1
	adder	0xF,0x2,0xE,0xF,0x1,0x1
	adder	0xF,0x3,0xF,0xF,0x1,0x1
	adder	0xF,0x4,0xC,0xF,0x1,0x1
	adder	0xF,0x5,0xF,0xF,0x1,0x1
	adder	0xF,0x6,0xE,0xF,0x1,0x1
	adder	0xF,0x7,0xF,0xF,0x1,0x1
	adder	0xF,0x8,0x8,0xF,0x5,0x1
	adder	0xF,0x9,0xF,0xF,0x1,0x1
	adder	0xF,0xA,0xE,0xF,0x1,0x1
	adder	0xF,0xB,0xF,0xF,0x1,0x1
	adder	0xF,0xC,0xC,0xF,0x1,0x1
	adder	0xF,0xD,0xF,0xF,0x1,0x1
	adder	0xF,0xE,0xE,0xF,0x1,0x1
	adder	0xF,0xF,0xF,0xF,0x1,0x1





